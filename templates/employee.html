{% extends 'base.html' %}

{% load humanize %}
{% load staticfiles %}

{% block toolbar %}
    {% include 'searchbar.html' %}
{% endblock %}
{% block content %}
<head>
<script src="jquery-3.2.0.min.js"></script>
</head>
    <div class="employee padded">
        <div class="row">
            <div class="col-4">
                <div class="basic-info">
                    <h1 class="name">{{ employee.first_name }} {{ employee.last_name }}</h1>
                    <h2 class="position">{{ employee.position }}</h2>
                    <h3 class="dept">{{ employee.full_department }}</h3>
                </div>

                <div class="tabs">
                    <ul class="tab-links">
                        <li class="tab1"><a href="javascript:void(0)" class="tab-links" onclick="openSalary(event, 'tab1')"
                          id="defaultOpen">2016</a>
                        <li class="tab2"><a href="javascript:void(0)" class="tab-links" onclick="openSalary(event, 'tab2')">2015</a>
                        <li class="tab3"><a href="javascript:void(0)" class="tab-links" onclick="openSalary(event, 'tab3')">2014</a>
                    </ul>
                </div>

                <div class="rating">
                    <div class="stars">
                    {% for star in stars %}
                        <i id="star-{{forloop.counter}}" data-rating="{{forloop.counter}}" class="star fa
                        {% if star = 'full' %}
                            fa-star full
                        {% elif star = 'half' %}
                            fa-star-half-o half
                        {% else %}
                            fa-star-o empty
                        {% endif %}"></i>
                    {% endfor %}
                    </div>
                    <div class="message">
                    {% if employee.num_ratings < 5 %}
                        {{ ratings_needed }} more votes needed
                    {% else %}
                        {{ employee.num_ratings }} votes
                    {% endif %}
                    </div>
                </div>
                <div class="salary-expenses row">
                    <div class="col-6">
                        <div class="salary-col text-center">
                            <span class="small-tag">Salary</span>
                            <div class="salary-block remuneration">
                                <!--${{ employee.remuneration|intcomma }} -->
                                <div id="tab1" class="tabcontent">100</div>
                                <div id="tab2" class="tabcontent">200</div>
                                <div id="tab3" class="tabcontent">300</div>
                            </div>

                            <div class="salary-rank">{{ rank.overall.salary|ordinal }} overall</div>
                            {% if rank.faculty.salary %}
                            <div class="salary-rank">{{ rank.faculty.salary|ordinal }} in {{ employee.faculty.short_name }}</div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="salary-col text-center">
                            <span class="small-tag">Expenses</span>
                            <div class="salary-block expenses">
                                ${{ employee.expenses|intcomma }}
                            </div>
                            <div class="salary-rank">{{ rank.overall.expenses|ordinal }} overall</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-8">
                <div class="charts">
                    <div class="chart">
                    </div>
                    {% if employee.faculty %}
                        <ul class="chart-tabs">
                            <li><a href="#chart-overall">Overall</a></li>
                            <li><a href="#chart-faculty">{{ employee.faculty.full_name }}</a></li>
                        </ul>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <style>
    /*----- Individual Tab Spacing -----*/
    ul.tab-links {
      -webkit-padding-start: 4px;
    }

    div.basic-info {
      margin-bottom: 5px;
    }

    li.tab1 {
      margin-right: 5px;
    }

    li.tab2 {
      margin-right: 5px;
    }

    /*----- Tabs -----*/
    .tabs {
        width:100%;
        display:inline-block;
        margin-top: 0px;
    }

      /*----- Tab Links -----*/
      /* Clearfix */
      .tab-links:after {
          display:block;
          clear:both;
          content:'';
      }

      .tab-links li {
          float: left;
          list-style:none;
      }

      .tab-links a {
            text-decoration:  none;
            padding:9px 15px;
            display:block;
            border-radius:3px;
            padding-left: 25px;
            padding-right: 25px;
            background:#1C1C1C;
            font-family: "lft-etica";
            font-weight: 500;
            font-size: 14px;
            color: white;
            transition:all linear 0.15s;
      }

      .tab-links a:hover {
          background:#8f362e;
          text-decoration:none;
      }

      li.active a, li.active a:hover {
          background:#fff;
          color:#4c4c4c;
      }
      .tab {
          display:none;
      }

      .tab.active {
          display:block;
      }
    </style>
{% endblock %}


{% block scripts %}
<script>
    var EMPLOYEE = {{ employee.remuneration }};
    var ID = {{ employee.id }};
    {% if employee.faculty %}
        var FACULTY = {{ employee.faculty.id }};
    {% else %}
        var FACULTY = false;
    {% endif %}
</script>
<script src="{% static "js/fb.js" %}"></script>
<script src="{% static "js/d3.min.js" %}"></script>
<script src="{% static "js/employee.js" %}"></script>

<script>
document.getElementById("defaultOpen").click();
function openSalary(evt, salary) {
    // Declare all variables
    var i, tabcontent, tablinks;

    // Get all elements with class="tabcontent" and hide them
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }

    // Get all elements with class="tablinks" and remove the class "active"
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }

    // Show the current tab, and add an "active" class to the link that opened the tab
    document.getElementById(salary).style.display = "block";
    evt.currentTarget.className += " active";
}
</script>
{% endblock %}
